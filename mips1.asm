######################################################################
# CSCB58 Summer 2022 Project
# University of Toronto, Scarborough
#
# Student Name: Gabriel Ethan Vainer, Student Number: ..., UTorID: vainerga
#
# Bitmap Display Configuration:
# - Unit width in pixels: 8 
# - Unit height in pixels: 8 
# - Display width in pixels: 256 
# - Display height in pixels: 256
# - Base Address for Display: 0x10008000
#
# Basic features that were implemented successfully
# - Basic feature a/b/c (choose the ones that apply)
#
# Additional features that were implemented successfully
# - Additional feature a/b/c (choose the ones that apply)
#
# Link to the video demo
# - Insert YouTube/MyMedia/other URL here and make sure the video is accessible
#
# Any additional information that the TA needs to know:
# - Write here, if any
#
######################################################################

# Demo for painting
# Bitmap Display Configuration:
# - Unit width in pixels: 8
# - Unit height in pixels: 8
# - Display width in pixels: 256
# - Display height in pixels: 256
# - Base Address for Display: 0x10008000 ($gp)

.data
displayAddress: .word 0x10008000

background: .word 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00d5eb, 0xff000000, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xffffffff, 0xffffffff, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff000000, 0xff00d5eb, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff848484, 0xff00fe41, 
0xff00fe41, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xffffffff, 0xffffffff, 0xffffffff, 0xff000000, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xffffffff, 0xff000000, 0xffffffff, 0xffffffff, 0xffffffff, 0xff000000, 0xff000000, 0xffffffff, 0xffffffff, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff00fe41, 
0xff00fe41, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xffffffff, 0xff000000, 0xffffffff, 0xff000000, 0xff000000, 0xffffffff, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xffffffff, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xff0000ef, 0xff000000, 0xff0000ef, 0xff000000, 0xff0000ef, 0xff000000, 0xff00fe41, 
0xff00fe41, 0xffffffff, 0xffffffff, 0xffffffff, 0xff000000, 0xffffffff, 0xffffffff, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xffffffff, 0xffffffff, 0xffffffff, 0xff000000, 0xffffffff, 0xffffffff, 0xffffffff, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff000000, 0xff00fe41, 
0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41, 0xff00fe41
defaultCharX: .word 3112
upDis: .word 0
leftDis: .word 2
rightDis: .word 1
downDis: .word 11

true: .word 1
topPadding: .word 0 4 8 12 16 20 24 28 32 36 40 44 48 52 56 60 64 68 72 76 80 84 88 92 96 100 104 108 112 116 120 124
leftPadding: .word 0 128 256 384 512 640 768 896 1024 1152 1280 1408 1536 1664 1792 1920 2048 2176 2304 2432 2560 2688 2816 2944 3072 3200 3328 3456 3584 3712 3840 3968
bottomPadding: .word 3968 3972 3976 3980 3984 3988 3992 3996 4000 4004 4008 4012 4016 4020 4024 4028 4032 4036 4040 4044 4048 4052 4056 4060 4064 4068 4072 4076 4080 4084 4088 4092 4096
rightPadding: .word 124 252 380 508 636 764 892 1020 1148 1276 1404 1532 1660 1788 1916 2044 2172 2300 2428 2556 2684 2812 2940 3068 3196 3324 3452 3580 3708 3836 3964 4092 4096
 
.eqv displayAddress 0x10008000
.eqv black 0xff000000
.eqv red 0xff0000
.text
.globl main

main:
lw $s1,true
bne $s1,1,Exit 
jal drawBackground

jal keyboardChanges
lw $s0, defaultCharX
addi $sp, $sp, -4
sw $s0, 0($sp)
jal drawCar
li $v0, 32  
li $a0, 100  
syscall  
 
j main

Exit:
li $v0, 10 # terminate the program
syscall


drawBackground:
li $t0, displayAddress # $t0 stores the base address for display
la $t1, background
li $t3, 1

whileDrawBackground:
	lw $t2, 0($t1)
	
	sw $t2, 0($t0)
	addi $t0, $t0, 4
	addi $t1, $t1, 4

	addi $t3, $t3, 1
	bne $t3, 1025, whileDrawBackground
	
	jr $ra
	
drawCar:
lw $t2, 0($sp) #stores coordinate
addi $sp, $sp, 4
li $t3, black
li $t4, red
li $t1, displayAddress

add $t1, $t1, $t2
sw $t3, ($t1)

addi $t1,$t1,4
sw $t4, ($t1)

addi $t1,$t1,4 
sw $t4, ($t1)

addi $t1,$t1,4 
sw $t3, ($t1)

addi $t1,$t1,256 
sw $t3, ($t1)

addi $t1,$t1,-4 
sw $t4, ($t1)

addi $t1,$t1,-4 
sw $t4, ($t1)

addi $t1,$t1,-4 
sw $t3, ($t1)

addi $t1,$t1,-124 
sw $t4, ($t1)

addi $t1,$t1,4 
sw $t4, ($t1)

jr $ra

keyboardChanges:
li $t9, 0xffff0000 
lw $t8, 0($t9) 
beq $t8, 1, keypress_happened 
jr $ra
keypress_happened:
lw $t3, 4($t9) # this assumes $t9 is set to 0xfff0000
beq $t3, 0x61, res_a # ASCII code of 'a' is 0x61 or 97 in decimal
beq $t3, 0x77, res_w
beq $t3, 0x73, res_s
beq $t3, 0x64 ,res_d
jr $ra

res_a:
la $a0, defaultCharX #get address
addi $a1, $s0, -32
sw $a1 0($a0) #save new value
jr $ra

res_w:
lw $s3, upDis
lw $s4, downDis
bne $s3,11,DrawW
jr $ra

res_s:
lw $s3, upDis
lw $s4, downDis
bne $s4,11,DrawS

jr $ra

res_d:
la $a0, defaultCharX #get address
addi $a1, $s0, 32
sw $a1 0($a0) #save new value
jr $ra

DrawS:
la $a0, defaultCharX #get address
addi $a1, $s0, 256
sw $a1 0($a0) #save new value
addi $a1,$zero,0
addi $a0, $zero, 0

la $a0, downDis #get address
addi $a1, $s4, 1
sw $a1 0($a0) #save new value

addi $a1,$zero,0
addi $a0, $zero, 0

la $a0, upDis #get address
addi $a1, $s3, -1
sw $a1 0($a0) #save new value
  
jr $ra 


DrawW:
la $a0, defaultCharX #get address
addi $a1, $s0, -256
sw $a1 0($a0) #save new value
addi $a1,$zero,0
addi $a0, $zero, 0
la $a0, downDis #get address
addi $a1, $s4, -1
sw $a1 0($a0) #save new value

addi $a1,$zero,0
addi $a0, $zero, 0

la $a0, upDis #get address
addi $a1, $s3, 1
sw $a1 0($a0) #save new value
jr $ra

DrawD
la $a0, defaultCharX #get address
addi $a1, $s0, 32
sw $a1 0($a0) #save new value
jr $ra